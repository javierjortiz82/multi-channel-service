# =============================================================================
# Multi-Channel Service - Production Environment Configuration
# =============================================================================
# This file documents environment variables for production deployment.
# Sensitive values should be stored in Google Secret Manager.
#
# Usage: These variables are set in Cloud Run via cloudbuild.yaml
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=Multi-Channel Service
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Cloud Run uses port 8080 by default
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
WORKERS=1

# -----------------------------------------------------------------------------
# Google Cloud Platform
# -----------------------------------------------------------------------------
# GCP_PROJECT_ID is set automatically in Cloud Run
# GCP_LOCATION is typically us-central1
GCP_PROJECT_ID=${PROJECT_ID}
GCP_LOCATION=us-central1

# Use Application Default Credentials (ADC) in Cloud Run
USE_ADC=true

# -----------------------------------------------------------------------------
# Telegram Configuration
# -----------------------------------------------------------------------------
# TELEGRAM_BOT_TOKEN: Stored in Secret Manager as 'telegram-bot-token'
# WEBHOOK_SECRET: Stored in Secret Manager as 'webhook-secret'
# WEBHOOK_HOST: Your public HTTPS URL (e.g., https://multi-channel-service-xxx.run.app)

WEBHOOK_PATH=/webhook
WEBHOOK_MAX_CONNECTIONS=100
WEBHOOK_IP_FILTER_ENABLED=false
WEBHOOK_DROP_PENDING_UPDATES=true
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_BUFFER_SECONDS=0.5

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Cloud Run captures stdout/stderr automatically
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_TO_FILE=false
LOG_CONSOLE_ENABLED=true

# -----------------------------------------------------------------------------
# Concurrency & Performance
# -----------------------------------------------------------------------------
# Cloud Run handles scaling, use single worker with threads
LIMIT_CONCURRENCY=100
LIMIT_MAX_REQUESTS=10000
BACKLOG=2048
TIMEOUT_KEEP_ALIVE=30
TIMEOUT_GRACEFUL_SHUTDOWN=30

# Gunicorn settings for Cloud Run
GUNICORN_WORKERS=1
GUNICORN_THREADS=8
GUNICORN_TIMEOUT=300

# Performance implementations
HTTP_IMPLEMENTATION=auto
LOOP_IMPLEMENTATION=auto

# -----------------------------------------------------------------------------
# CORS Configuration (if needed for API Gateway)
# -----------------------------------------------------------------------------
CORS_ALLOW_ORIGINS=https://www.nexusintelligent.ai,https://odiseo-sales-ai.vercel.app,https://odiseo-web.vercel.app
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_HEADERS=Authorization,Content-Type,X-Request-ID,x-api-key

# -----------------------------------------------------------------------------
# Secret Manager References
# -----------------------------------------------------------------------------
# These are the names of secrets in Google Secret Manager:
# - telegram-bot-token: Telegram Bot API token from BotFather
# - webhook-secret: Secret token for webhook validation
# - database-url: (if needed) PostgreSQL connection string
# - db-password: (if needed) Database password
